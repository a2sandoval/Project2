<!DOCTYPE html>
<html>

<head>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="css/styles.css" type="text/css" rel="stylesheet" media="screen,projection" />


  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Your Character</title>

  <style>
    .switch label input[type=checkbox]:checked+.lever:after {
    background-color: #1976d2;
    }
  </style>

  <!-- Favicon -->
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
</head>

<body>

  <nav class=" light-blue darken-4 " role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">The What?</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="">Create a Character</a></li>
        <li><a href="/">Created Characters</a></li>
      </ul>

      <ul id="nav-mobile" class="sidenav">
        <li><a href="">Create a Character</a></li>

        <li><a href="/">Created Characters</a></li>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <h1 class="header center orange-text">Instructions:</h1>
      <div class="row center">
        <h5 class="header col s12 light">It's time to create your character! Enter their bio data, and your name and
          then
          simply select from the charactersitics below. </h5>
      </div>
      <!-- <div class="row center">
            <a href="http://materializecss.com/getting-started.html" id="download-button" class="btn-large waves-effect waves-light orange">Get Started</a>
          </div>
          <br><br> -->

    </div>
  </div>

  <div class="container">
    <!-- Page Content goes here -->
    <div class="section">

      <div class="row">
        <form class="col s12">
          <div class="row">
            <div class="input-field col s12">
              <input placeholder="Rose Tyler" id="first_name" type="text" class="validate">
              <label for="character_name">Character Name</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <input placeholder="http://badassimageofyourcharcter.com/image.jpg" id="character_image" type="text"
                class="validate">
              <label for="character_image">Character Image URL</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <textarea id="character_description" class="materialize-textarea" placeholder="Quick description of your character"></textarea>
              <label for="textarea1">Description</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <textarea id="character_background" class="materialize-textarea" placeholder="Your character's full backstory"></textarea>
              <label for="textarea2">Background</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12">
              <input placeholder="Amelia" id="player_name" type="text" class="validate">
              <label for="player_name">Player Name</label>
            </div>
          </div>


        </form>
      </div>
    </div>
    <!--   Characteristics Section   -->
    <div class="section">
      <h2>Attributes</h2>
      <h6><span id="characterPoints">18</span> Character Points left!</h6>
      <div class="row">
        <form class="col s12">
          <div class="row">

            <div class="col s1 m3 l4">
              <label>Awareness</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrAw" min="0" max="24">
            </div>

            <div class="col s1 m3 l4">
              <label>Coordination</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrCo" min="0" max="24">
            </div>

            <div class="col s1 m3 l4">
              <label>Ingenuity</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrIn" min="0" max="24">
            </div>

            <div class="col s1 m3 l4">
              <label>Presence</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrPr" min="0" max="24">
            </div>


            <div class="col s1 m3 l4">
              <label>Resolve</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrRe" min="0" max="24">
            </div>

            <div class="col s1 m3 l4">
              <label>Strength</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=1 id="attrSt" min="0" max="24">
            </div>


          </div>

        </form>

      </div>
    </div>
    <!------- Traits Section-------->

    <div class="section">
      <h2>Traits</h2>
      <h6><span id="characterPoints2">18</span> Character Points left!</h6>
      <div class="row">
        <form class="col s12">
          <div class="row" id="traitsHere">

            
          </div>
        </form>
      </div>
    </div>
    <!------- Attributes Section ------>

    <div class="section ">
      <h2>Skills</h2>
      <h6><span id="skillzPoints">18</span> points left!</h6>
      <div class="row">
        <form class="col s12">
          <div class="row">

            <div class="col s1 m3 l3">
              <label>Athletics</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skAthletics" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Convince</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skConvince" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Craft</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skCraft" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Fighting</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skFighting" min="0" max="24">
            </div>


            <div class="col s1 m3 l3">
              <label>Knowledge</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skKnowledge" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Marksman</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skMarksman" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Medicine</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skMedicine" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Science</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skScience" min="0" max="24">
            </div>


            <div class="col s1 m3 l3">
              <label>Subterfuge</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skSubterfuge" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Survival</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skSurvival" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Technology</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skTechnology" min="0" max="24">
            </div>

            <div class="col s1 m3 l3">
              <label>Transport</label>
              <input oninput="shareTreasure()" type="number" class="short-input" value=0 id="skTransport" min="0" max="24">
            </div>


          </div>

        </form>

      </div>
      <div class="row">
        <div class="col s12 offset-s9 ms6 offset-s7 l12 offset-l10">
          <br>
          <button class="btn waves-effect waves-light blue darken-4" type="submit" name="action" id="submit">Submit
            <i class="material-icons right">send</i>
          </button>
        </div>
      </div>
    </div>


  </div>



  <footer class="page-footer  light-blue darken-4">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Team Bio</h5>
          <p class="grey-text text-lighten-4">We are a team of Coding Bootcamp students working on this project
            like
            it's our full time job. Check out our github below!</p>

          <div class="footer-copyright">
            <div class="container">
              Check us out on <a class=" text-lighten-3" href="">Github</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!--JavaScript at end of body for optimized loading-->
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- <script src="./js/index.js"></script> -->
  <!-- <script src="js/loadTraits.js"></script> -->
  <script type="text/javascript">
    function createTrait(info) {
      var newTrait = $("<div>").addClass("col s1 m3");
      var mainLabel = $("<label>").html(info.name);
      var switchDiv = $("<div>").addClass("switch");
      var subLabel = $("<label>");
      var traitInput = "<input type='checkbox' class='blue darken-4' unchecked id='trait" + info.id + "' cost='" + info.cost + "' data-id='" + info.id + "'/>";
      //console.log(info.cost);
      var lever = $("<span>").addClass("lever blue darken-4");
      subLabel.append("Off", traitInput, lever, "On");
      switchDiv.append(subLabel);
      newTrait.append(mainLabel, switchDiv);
      return newTrait;
    };

    function loadAllTraits() {
      $.ajax({
        method: "GET",
        url: "/api/static/traits"
      }).then(function (data) {
        // loop through all traits
        var testTrait = {
          name: "Test Trait",
          id: 0,
          cost: 5
        };
        var testTraitttt = createTrait(testTrait);
        for (var i = 0; i < data.length; i++) {
          var newTrait = createTrait(data[i]);
          $("#traitsHere").append(newTrait);
        };
        $("#traitsHere").append(testTraitttt);
      });
    };

    $(document).ready(function () {
      loadAllTraits();
    });

    var formSubmit = function (event) {
      event.preventDefault();

      // Creation of object to pass to POST URLs
      // TODO create reference for stuff
      var characterBase = {
        "playerName": $("#player_name").val().trim(),
        "charName": $("#first_name").val().trim(),
        "image": $("#character_image").val().trim(),
        "description": $("#character_description").val().trim(),
        "background": $("#character_background").val().trim(),
        "stuff": "stuff"
      };
      $.ajax({
        headers: {
          "Content-Type": "application/json"
        },
        type: "POST",
        url: "api/characters/characters",
        data: JSON.stringify(charTraits)
      }).then(function (skillzData) {
        console.log("Basic Info sent to database!");
      });

      // TODO: correct references
      var charAttributes = {
        "attrAwMax": $("attrAw").val(),
        "attrAwCurr": $("attrAw").val(),
        "attrCoMax": $("attrCo").val(),
        "attrCoCurr": $("attrCo").val(),
        "attrInMax": $("attrIn").val(),
        "attrInCurr": $("attrIn").val(),
        "attrPrMax": $("attrPr").val(),
        "attrPrCurr": $("attrPr").val(),
        "attrReMax": $("attrRe").val(),
        "attrReCurr": $("attrRe").val(),
        "attrStMax": $("attrSt").val(),
        "attrStCurr": $("attrSt").val()
      };
      $.ajax({
        headers: {
          "Content-Type": "application/json"
        },
        type: "POST",
        url: "api/characters/attributes",
        data: JSON.stringify(charTraits)
      }).then(function (skillzData) {
        console.log("Attributes sent to database!");
      });

      // TODO: correct reference
      var charSkillz = {
        "skAthletics": $("#skAthletics").val(),
        "skConvince": $("#skConvince").val(),
        "skCraft": $("#skCraft").val(),
        "skFighting": $("#skFighting").val(),
        "skKnowledge": $("#skKnowledge").val(),
        "skMarksman": $("#skMarksman").val(),
        "skMedicine": $("#skMedicine").val(),
        "skScience": $("#skScience").val(),
        "skSubterfuge": $("#skSubterfuge").val(),
        "skSurvival": $("#skSurvival").val(),
        "skTechnology": $("#skTechnology").val(),
        "skTransport": $("#skTransport").val()
      };
      $.ajax({
        headers: {
          "Content-Type": "application/json"
        },
        type: "POST",
        url: "api/characters/skills",
        data: JSON.stringify(charTraits)
      }).then(function (skillzData) {
        console.log("Skills sent to database!");
      });

      // Format and load all of the trait that the player checked off
      var charTraits = {
        "trait1": 0,
        "trait2": 0,
        "trait3": 0,
        "trait4": 0,
        "trait5": 0,
        "trait6": 0,
        "trait7": 0,
        "trait8": 0,
        "trait9": 0,
        "trait10": 0,
        "trait11": 0,
        "trait12": 0
      };
      var count = 1;
      $("input:checked").each(function () {
        if (count <= 12) {
          var temp = "trait" + count;
          charTraits[temp] = parseInt($(this).attr("data-id"));
          count++;
        }
      });
      $.ajax({
        headers: {
          "Content-Type": "application/json"
        },
        type: "POST",
        url: "api/characters/traits",
        data: JSON.stringify(charTraits)
      }).then(function (data) {
        console.log("Traits sent to database!");
      });
     // window.open('https://the-what.herokuapp.com/');

    };
    $("#submit").on("click", formSubmit);
    

    function shareTreasure() {
      console.log("hi");
    }
  </script>
</body>

</html>
